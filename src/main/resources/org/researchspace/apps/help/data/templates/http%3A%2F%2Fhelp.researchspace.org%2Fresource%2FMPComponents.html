
<h2>Utility components</h2>

<p>
    The ResearchSpace platform exposes some additional 3rd party react components for different purposes.
    These components are prefixed with <code>mp-*</code>.
</p>

<hr class="divider">

<h3 id="rs-doc_thumbnail">Resource thumbnail</h3>
<p>The <code><mp-resource-thumbnail></mp-resource-thumbnail></code> component queries and displays a thumbnail 
  image for a specified resource. The component uses the global ThumbnailService, 
  which can be configured using the UI configuration preferredThumbnails property 
  (see <semantic-link title="Documentation" uri="Help:BasicSystemConfiguration">basic system configuration</semantic-link>).</p>
    
<h4>Example: Fallback Image</h4>
<p>The <code>noImageUri</code> property defines an image that the component will display if the resource does not have any thumbnail.</p>
<p>
<mp-code-example>
<![CDATA[
<mp-resource-thumbnail iri='http://example.com/person/alice' no-image-uri='/images/help/thenounproject/noun_1113333.svg' style="max-width: 100px;"  />
]]>
</mp-code-example>
</p>

<h4>Example: Fallback Component</h4>
<p>The <code><mp-resource-thumbnail-fallback></mp-resource-thumbnail-fallback></code> component has the same purpose as the 
  <code>noImageUri</code> property, but it defines a fallback HTML-element.</p>
<p>
<mp-code-example>
<![CDATA[
<mp-resource-thumbnail iri='http://example.com/person/alice'>
  <mp-resource-thumbnail-fallback>
    <span>Image not found!</span>
  </mp-resource-thumbnail-fallback>
</mp-resource-thumbnail>
]]>
</mp-code-example>
</p>

<hr class="divider">

<h3 id="rs-doc_modal">Modal dialog / Overlay</h3>
<p>The <code><mp-overlay-dialog></mp-overlay-dialog></code> to open some content in a modal dialog or overlay. 
  A dialog is just a variant of on overlay. By default the attribute <code>type</code> is set to <code>type=modal</code>. 
  Setting it to <code>type=lightbox</code> will create an lightbox overlay instead of modal dialog. 
  Arbitrary elements can be wrapped into <code><mp-overlay-dialog-trigger></mp-overlay-dialog-trigger></code> 
  element to open (trigger) the dialog/overlay showing any elements specified within 
  <code><mp-overlay-dialog-content></mp-overlay-dialog-content></code> element.</p>
    
<h4>Example: Modal with Link as Trigger</h4>
<p>
<mp-code-example>
<![CDATA[
<mp-overlay-dialog title="My Dialog">
  <mp-overlay-dialog-trigger><a>Show in Dialog</a></mp-overlay-dialog-trigger>
  <mp-overlay-dialog-content>
  	Content of the Dialog
  </mp-overlay-dialog-content>
</mp-overlay-dialog>
]]>
</mp-code-example>
</p>

<h4>Example: Large Modal with Button as Trigger</h4>
<p>
<mp-code-example>
<![CDATA[
<mp-overlay-dialog title="My Dialog" type="modal" bs-size="large">
  <mp-overlay-dialog-trigger><button class="btn btn-primary">Show in Dialog</button></mp-overlay-dialog-trigger>
  <mp-overlay-dialog-content>
 	 Content of the Dialog
  </mp-overlay-dialog-content>
</mp-overlay-dialog>
]]>
</mp-code-example>
</p>

<h4>Example: Overlay with Button as Trigger</h4>
<p>
<mp-code-example>
<![CDATA[
<mp-overlay-dialog title="My Dialog" type="lightbox">
  <mp-overlay-dialog-trigger><button class="btn btn-primary">Show in Overlay</button></mp-overlay-dialog-trigger>
  <mp-overlay-dialog-content>
  	Content of the Overlay
  </mp-overlay-dialog-content>
</mp-overlay-dialog>
]]>
</mp-code-example>
</p>

<hr class="divider">

<h3 id="rs-doc_pageLoader">Page loader</h3>
<p>The <code><mp-page-loader></mp-page-loader></code> component behaves similar to a 
  server-side page include with the difference that the loading and rendering is 
  done asynchronously on client side. The requested page is compiled in backend 
  with the context of the current resource (same as an include).
</p>
    
<h4>Example: Loading a page asynchronously in a modal dialog</h4>
<p>
<mp-code-example>
<![CDATA[
<mp-overlay-dialog title="Homepage content" type="modal" bs-size="large">
  <mp-overlay-dialog-trigger><a>Show homepage in Dialog</a></mp-overlay-dialog-trigger>
  <mp-overlay-dialog-content>
    <div width="1000px"><mp-page-loader iri="http://www.researchspace.org/resource/Start"></mp-page-loader></div>
  </mp-overlay-dialog-content>
</mp-overlay-dialog>
]]>
</mp-code-example>
</p>

<hr class="divider">

<h3 id="rs-doc_textTruncate">Text truncate</h3>
<p> To automatically truncate long text snippets.</p>
    
<h4>Example: Static Truncate</h4>
<p>By default truncates to the size of the outer element, whereas the truncate element (e.g. ellipsis) can be defined:</p>
<p>
<mp-code-example>
<![CDATA[
<div style="width:200px;">
  <mp-text-truncate truncate="...">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    Morbi vel mauris sollicitudin, i vel mauris sollicitudin, tristique mauris quis, tempor risus.
    Maecenas id turpis eget nibh aliquet venenatis.
  </mp-text-truncate>
</div>
]]>
</mp-code-example>
</p>

<h4>Example: Truncate with option to expand or collapse</h4>
<p> Another example is to define the maximum number of lines and to define elements, which allow the user to dynamically expand or collapse the (truncated) text.</p>
<p>
<mp-code-example>
<![CDATA[
<mp-text-truncate lines=3 expand='<span>...<a>read more</a></span>' collapse='<span>(<a>show less</a>)</span>'>
	Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi vel mauris sollicitudin, tristique mauris quis, tempor risus. Maecenas id turpis eget nibh aliquet venenatis. Duis in feugiat sapien, quis placerat enim. Pellentesque ac auctor risus. Sed placerat iaculis turpis in tristique. Proin dolor ex, malesuada nec purus a, viverra efficitur ex. Donec at augue ac urna fermentum cursus. Suspendisse quis feugiat nunc. Morbi ultrices, tellus vitae hendrerit dignissim, nisi leo efficitur ipsum, non varius sapien felis quis nunc. In eu risus aliquam, pellentesque purus in, imperdiet libero. Suspendisse sollicitudin ex a interdum interdum. Aenean nulla odio, pharetra et ligula quis, venenatis finibus mi. Quisque sit amet nisl nec lorem laoreet facilisis sed sed augue. Pellentesque varius consectetur gravida.
</mp-text-truncate>
]]>
</mp-code-example>
</p>

<hr class="divider">

<h3 id="rs-doc_sparqldownload">SPARQL result download</h3>
<p>Offers results of SPARQL queries as download in different serialization format.</p>
    
<h4>Example: Download tuple result as CSV</h4>
<p>... using a link.</p>
<p>
<mp-code-example>
<![CDATA[
<mp-sparql-download
  query="SELECT * WHERE {?a ?b ?c} LIMIT 10"
  header="text/csv"
  filename="mytupleresult.csv"
>
  <a href="#">Download CSV</a>
</mp-sparql-download>
]]>
</mp-code-example>
</p>

<h4>Example: Download graph result as JSON-LD</h4>
<p>... using a button.</p>
<p>
<mp-code-example>
<![CDATA[
<mp-sparql-download
  query="CONSTRUCT {?a ?b ?c} WHERE {?a ?b ?c} LIMIT 10"
  header="application/ld+json"
  filename="mygraphresult.json">
  <button class="btn btn-primary">Download JSON-LD</button>
</mp-sparql-download>
]]>
</mp-code-example>
</p>

<hr class="divider">

<h3 id="rs-doc_copyClipboard">Copy to clipboard</h3>
<p>The <code><mp-copy-to-clipboard></mp-copy-to-clipboard></code> component copies text to clipboard.</p>
    
<h4>Example: Default</h4>
<p>
<mp-code-example>
<mp-copy-to-clipboard text='text'>
  <button class='btn btn-primary'><i class='fa fa-copy'></i></button>
</mp-copy-to-clipboard>
</mp-code-example>
</p>

<h4>Example: Custom notification message</h4>
<p>
<mp-code-example>
<mp-copy-to-clipboard text='text' message='Custom message'>
  <button class='btn btn-primary'><i class='fa fa-copy'></i></button>
</mp-copy-to-clipboard>
</mp-code-example>
</p>

<hr class="divider">

<h3 id="rs-doc_hasPermission">Has permission</h3>
<p>The <code><mp-has-permission></mp-has-permission></code> component displays child component if user has the required permission, otherwise displays nothing.</p>    
<p>  
<mp-code-example>
<mp-has-permission permission='sparql:update'>
  <div>This will be rendered if the currently logged-in user has the permission "sparql:update"</div>
</mp-has-permission>
</mp-code-example>
</p>  

<hr class="divider">

<h3 id="rs-doc_anchorLink">Anchor link</h3>
<p>The <code><mp-anchor /></code> component scrolls the page to the target element with smooth animation.</p>

<h4>Example: Default</h4>
<p>
<mp-code-block mode='text/html'>
  <![CDATA[
<mp-anchor to='#target1'>anchor link</mp-anchor>
<div id='target1'>target element</div>
]]></mp-code-block>
</p>

<h4>Example: Custom offset and duration</h4>
<p>
<mp-code-block mode='text/html'><![CDATA[
<mp-anchor to='#target2' animate='{"offset": -104, "duration": 100}'>anchor link</mp-anchor>
<div id='target2'>target element</div>
]]></mp-code-block>
</p>

<hr class="divider">

<h3 id="rs-doc_flipPanel">Flip panel</h3>
<p>Panel with two sides that can be flipped to <code>front</code> or <code>back</code> side.</p>
<p>Additional values can be passed with <code>front-variables</code> ande <code>back-variables</code></p>
<p>Trigger <code>TwoSidePanel.ShowBack</code> to show the back template and <code>TwoSidePanel.ShowFront</code> 
  to switch to the front one. It is possible to send additional values with event payload and they will be 
  available inside the template. Values that are send with event override the default template variables defined on the component.</p>
<p>By default the template is fully re-rendered when panel is flipped, but it can be disabled with <code>refresh-on-change="false"</code> attribute.</p>
<p>
<mp-code-example>
<two-side-panel id='first-flip-panel' 
                front-variables='{"A": "A Value"}'
                back-variables='{"B": "B Value"}'
>
  <template id='front'>
    <p>Front Side. Variable A: {{A}}</p>
    <mp-event-trigger id='first-flip-panel-front' 
                      type='TwoSidePanel.ShowBack' 
                      targets='["first-flip-panel"]'
                      >
      <button class="btn btn-primary">Show Back</button>
    </mp-event-trigger>
    <mp-event-trigger id='first-flip-panel-front' 
                      type='TwoSidePanel.ShowBack' 
                      targets='["first-flip-panel"]'
                      data='{"B": "Alternative B Value"}'
                      >
      <button class="btn btn-primary" style="margin-left: 10px;">
        Show Back with Variable
      </button>
    </mp-event-trigger>
  </template>
  <template id='back'>
    <p>Back Side. Variable B: {{B}}</p>
    <mp-event-trigger id='first-flip-panel-back' 
                      type='TwoSidePanel.ShowFront' 
                      targets='["first-flip-panel"]'
                      >
      <button class="btn btn-primary">Show Front</button>
    </mp-event-trigger>
  </template>
</two-side-panel>
</mp-code-example>
</p>

<hr class="divider">

<h3 id="rs-doc_splitPane">Split pane</h3>
<p>Allows to split an html-element into two panes, supports dynamic resizing.</p>


<mp-splitpane min-size=35 dock=true>
  <div data-flex-layout="column top-stretch" style="border-right: 1px solid #dee1e3; background: #f5f5f5; height: auto">
    <mp-splitpane-toggle-on>
      <button style="border: none; background: transparent; padding: 15px 2px; outline: none; width: 100%;">
        <i class="fa fa-angle-double-right" style="font-size: 20px;" aria-hidden="true"></i>
      </button>
    </mp-splitpane-toggle-on>
    <mp-splitpane-toggle-off>
      <button data-flex-layout="row center-left" style="border: none; border-bottom: 1px solid #999; background: #fff; padding: 15px; outline: none; width: 100%;">
        <h4 style="margin: 0px;">Sidebar</h4>
        <div class="fa fa-angle-double-left" style="font-size: 20px; margin-left: auto;" aria-hidden="true"></div>
      </button>
    </mp-splitpane-toggle-off>
    <mp-splitpane-sidebar-open style="display: flex; flex-direction: column; flex: auto;">
      Sidebar Content
    </mp-splitpane-sidebar-open>
  </div>

  <div style="padding-left: 30px;">


    <h4>Configuration</h4>
    <div class="alert alert-danger">MISSING CONFIG TABLE</div>
  [[!--  <mp-documentation type="SplitPaneConfig"></mp-documentation> --]]

    <h4>Basic example</h4>
    <p><![CDATA[
      <mp-splitpane min-size=110>
        <div data-flex-layout="column top-stretch" style="border-right: 1px solid #dee1e3; background: #f5f5f5;">
          Pane 1
        </div>
        <div data-flex-layout="column top-stretch" style="background: #f5f5f5;">
          Pane 2
        </div>
      </mp-splitpane>
      ]]>
      <mp-code-example>

</mp-code-example>
    </p>

    <h4>Example: Toggle on/off buttons</h4>
    <p>Put the <code>mp-splitpane-toggle-on</code>, <code>mp-splitpane-toggle-off</code>, 
      <code>mp-splitpane-sidebar-open</code> and <code>mp-splitpane-sidebar-closed</code> 
      components inside the pane to enable toggle on/off buttons.</p>
    <p>
      <mp-code-example>
<![CDATA[
<mp-splitpane min-size=110>
  <div data-flex-layout="column top-stretch" style="border-right: 1px solid #dee1e3; background: #f5f5f5; height: auto">
    <mp-splitpane-toggle-on>
      <button data-flex-layout="row center-left" style="border: none; border-bottom: 1px solid #999; background: #fff; padding: 15px; outline: none; width: 100%;">
        <h4 style="margin: 0px;">Toggle on</h4>
      </button>
    </mp-splitpane-toggle-on>
    <mp-splitpane-toggle-off>
      <button data-flex-layout="row center-left" style="border: none; border-bottom: 1px solid #999; background: #fff; padding: 15px; outline: none; width: 100%;">
        <h4 style="margin: 0px;">Toggle off</h4>
      </button>
    </mp-splitpane-toggle-off>
    <mp-splitpane-sidebar-open>Open</mp-splitpane-sidebar-open>
    <mp-splitpane-sidebar-closed>Closed</mp-splitpane-sidebar-closed>
  </div>
  <div>
    Main Content
  </div>
</mp-splitpane>
]]>
      </mp-code-example>
    </p>
    
    <h4>Example: Sidebar</h4>
    <p>Set the <code>dock</code> property to <code>true</code> to use the component for sidebar, as here on the left side.</p>
    <p>
      <mp-code-block mode='text/html'>
<![CDATA[
<mp-splitpane min-size=35 dock=true>
  <div data-flex-layout="column top-stretch" style="border-right: 1px solid #dee1e3; background: #f5f5f5; height: auto">
    <mp-splitpane-toggle-on>
      <button style="border: none; background: transparent; padding: 15px 2px; outline: none; width: 100%;">
        <i class="fa fa-angle-double-right" style="font-size: 20px;" aria-hidden="true"></i>
      </button>
    </mp-splitpane-toggle-on>
    <mp-splitpane-toggle-off>
      <button data-flex-layout="row center-left" style="border: none; border-bottom: 1px solid #999; background: #fff; padding: 15px; outline: none; width: 100%;">
        <h4 style="margin: 0px;">Sidebar</h4>
        <div class="fa fa-angle-double-left" style="font-size: 20px; margin-left: auto;" aria-hidden="true"></div>
      </button>
    </mp-splitpane-toggle-off>
    <mp-splitpane-sidebar-open style="display: flex; flex-direction: column; flex: auto;">
      Sidebar Content
    </mp-splitpane-sidebar-open>
  </div>
  <div>
    <!-- page content -->
  </div>
</mp-splitpane>
]]>
      </mp-code-block>
    </p>

  </div>
</mp-splitpane>