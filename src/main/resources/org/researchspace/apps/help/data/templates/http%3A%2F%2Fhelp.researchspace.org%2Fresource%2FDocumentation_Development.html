<style>
  .page__body {
    float: unset;
    margin: 0;
    padding: 0;
    width: auto;
  }

  .table {
    border: 1px solid --color-border;
  }
</style>

<mp-splitpane id="help-documentation-development" 
              class-name="help-documentation-splitpane color-blue"
              min-size=60 
              default-size=260 
              snap-threshold=100
              default-open=true 
              always-render=true 
              persist-resize=false>

  <div class="split-pane__sidebar split-pane__leftsidebar">
    <mp-splitpane-toggle-on>
      <button class="btn-toggle-on">
        <div class="btn-toggle-on-content">
          <rs-icon icon-type="rounded" icon-name="chevron_right" symbol="true"></rs-icon>
        </div>
      </button>
    </mp-splitpane-toggle-on>
    <mp-splitpane-sidebar-open style="flex: 1;">
      <div class="split-pane__sidebar-open">
        [[!-- Sidebar Navigation --]]
        <div class="rs-doc-navigation">
            <ul class="nav">
              <li class="nav-item rs-doc-navigation-title">
                <a class="nav-link active" href="#rs-doc_devstart">Development</a>
                <ul class="nav">
                  <li class="nav-item">
                    <a class="nav-link" href="#rs-doc_architecture">Architecture and Conventions</a>
                    <ul class="nav">
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_templates">Templates</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_sparql">SPARQL</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_components">Declarative Components</a></li>
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#rs-doc_addData">Working with data</a>
                    <ul class="nav">
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_loadFile">Loading a data File</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_uploadExample">Quick example</a></li>
                    </ul>
                  </li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_configuration">Simple configuration</a>
                    <ul class="nav">
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_kp">Knowledge patterns</a></li>
                      <li class="nav-item">
                        <a class="nav-link" href="#rs-doc_search">Search</a>
                        <ul class="nav">
                          <li class="nav-item"><a class="nav-link" href="#rs-doc_searchConfig">Semantic Search Config</a></li>
                          <li class="nav-item"><a class="nav-link" href="#rs-doc_searchKeyword">Semantic search query keyword</a></li>
                        </ul>
                      </li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_kmap">Knowledge Map</a></li>
                    </ul>
                  </li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_rsPage">Anatomy of a ResearchSpace page</a></li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_css">CSS style guide</a></li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_semantic">Semantic components</a></li>
                  <li class="nav-item">
                    <a class="nav-link" href="#rs-doc_utility">Utility components</a>
                    <ul class="nav">
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_thumbnail">Resource thumbnail</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_label">Resource label</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_highlight">Highlight</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_anchorLink">Anchor link</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_textTruncate">Text truncate</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_copyClipboard">Copy to clipboard</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_modal">Modal dialog / Overlay</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_pageLoader">Page loader</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_sparqldownload">SPARQL result download</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_hasPermission">Has permission</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_flipPanel">Flip panel</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_splitPane">Split pane</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_dashboard">Dashboard</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_codeDocumentation">Code documentation</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_multiSelection">Multiple selection</a></li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_workflowSystem">Workflow system</a></li>
                      
                    </ul>
                  </li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_events">Events</a></li>
                [[!-- <li class="nav-item"><a class="nav-link" href="#rs-doc_images">Images and IIIF</a></li> --]]
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_settings">Settings</a>
                    <ul class="nav">
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_systemConfigs">System configurations</a>
                        <ul class="nav">
                          <li class="nav-item"><a class="nav-link" href="#rs-doc_UIConfigs">UI configuration</a></li>
                          <li class="nav-item"><a class="nav-link" href="#rs-doc_environmentConfigs">Environment configuration</a></li>
                          <li class="nav-item"><a class="nav-link" href="#rs-doc_globalConfigs">Global configuration</a></li>
                          <li class="nav-item"><a class="nav-link" href="#rs-doc_dataQualityConfigs">Data quality configuration</a></li>
                        </ul>
                      </li>
                      <li class="nav-item"><a class="nav-link" href="#rs-doc_repManager">Repository manager</a>
                        <li class="nav-item"><a class="nav-link" href="#rs-doc_authenticationProxy">Authentication proxy</a>
                    </ul>
                  </li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_logs">Platform logs</a></li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_apps">Apps</a></li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_federation">Federation</a></li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_services">Services</a></li>
                  <li class="nav-item"><a class="nav-link" href="#rs-doc_tutorials">Tutorials</a></li>
                </ul>
              </li>
            </ul>
        </div>
      </div>
    </mp-splitpane-sidebar-open>
  </div>
  
  <div class="rs-doc-content">
    <div class="page__grid-container help-page-container">
      <div class='page__content-container'>
      
        <section id="rs-doc_devstart">
          <h1>Development</h1>
          <h2>The lastest ResearchSpace developer documentation and sample code</h2>
          
          <hr class="divider">

          <div class="rs-doc_2columns" style="margin-bottom: 20px;">
            <div>
                <span><b>Version:</b></span>
                <span>&nbsp; ResearchSpace 4.0.0</span>
            </div>
            <div>
              <span><b>Updated:</b></span>
              <span>&nbsp; 1 Jan, 2025</span>
            </div>
          </div>

          <p class="alert alert-info">
            For development support contact us at 
            <a href="mailto:support@kartography.org" aria-label="Link to mailto:support@kartography.org" target="_self" class="text-link-action">
            support@kartography.org</a>.
          </p>

        </section>

        <hr class="divider">

        <section id="rs-doc_architecture">
          <h2>Architecture and Conventions</h2>
        </section>

        <section id="rs-doc_templates">
          <h3>Templates</h3>
          <p>A template is a web page into which specific ResearchSpace components and logic can be embedded like semantic-tables, semantic-search, semantic-narratives, knowledge maps and so on. It uses a templating system called handlebars that allows the use of variables and conditional 
            logic - e.g. if this - then this. As an admin user you can edit and nest templates in the system.</p>
          
          <p>To create a <b>new blank page for a template</b> just define a new page in the address bar. 
            If you append to the base URL (<a href="/resource/" target="_blank" class="text-link-action">http://localhost:10214/resource/</a>) with rsp://testpage, then a blank page is created. You can then add some content.</p>
          <p>Embedding templates provides flexibility, and templates can talk to each other and pass parameters.</p>
          <p>To know more about templates look at the 
            <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                            urlqueryparam-view='help' 
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:Documentation_Templates"]]' 
                            urlqueryparam-custom-label='Templating system'
                            class="text-link-action">
              Templating system documentation
            </semantic-link>.</p>
          <p> The key dynamic is this:</p>
            
            <ul>
              <li>A component includes the ability to retrieve information from the data store</li>
              <li>It then has parameters for dealing with that data</li>
              <li>The data can be used in an inline template with html or passed to another template</li>
              <li>logic for that data can be used through the templating system</li> 
            </ul>

        </section>

        <hr class="divider">

        <section id="rs-doc_sparql">
          <h3>SPARQL</h3>
          <p>SPARQL is the query language for RDF, just as SQL is the query language for
            relational databases. For SELECT queries, to retrieve data, It works through
            defining graph patterns and then using variables to retrieve data. 
          </p>
          <p>Essentially data is stored in a triple which is a statement with 3 parts. The triple patterns above are stored like this:</p>
          
          <table class="table table-striped table-bordered">
            <tbody>
              <tr>
                <td>rs:person/john_smith</td>
                <td>rdf:type</td>
                <td>crm:E21_Person</td>
              </tr>
              <tr>
                <td>rs:person/john_smith</td>
                <td>crm:P1_is_identified_by</td>
                <td>rs:person/john_smith/appellation</td>
              </tr>
              <tr>
                <td>rs:person/john_smith/appellation</td>
                <td>rdf:type</td>
                <td>crm:E41_Appellation</td>
              </tr>
              <tr>
                <td>rs:person/john_smith/appellation</td>
                <td>crm:P90_has_symbolic_content</td>
                <td>"John Smith"</td>
              </tr>
            </tbody>
          </table>

          <p></p>
          
          <p>To retrieve these types of records we need define the pattern that represents these triples. We dont 
          know what the URI are (in red), so we just replace them with variables which just need to start with a '?'. 
          The types in blue help traverse the path to the name so we keep those. So if I want to retreive all the names of people in the system;</p>
          
          <mp-code-highlight mode='application/sparql-query' 
                            code-text='PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>
                                        SELECT ?names WHERE
                                        {
                                        ?personuri rdf:type crm:E21_Person .
                                        ?appellation rdf:type crm:E41_Appellation .
                                        ?personuri crm:P1_is_identified_by ?appellation .
                                        
                                        ?appellation crm:P90_has_symbolic_content ?names .
                                        }'>
          </mp-code-highlight>     
          
          <br><br>
          <p>To get the values for all variables the SELECT *</p>
          
          
          <p><b>Templates pull data from the data store. The more semantic and meaningful the underlying knowledge base, the greater the benefits of the system</b></p> 
          <p>If you create the testpage and copy the script below into it then the principle can be shown through the simple component - Semantic Query which retrieves data and then allows it to be used with html.</p>
            
          <mp-code-example show-code-by-default='true' mode='text/html'>  
          <![CDATA[ 
<semantic-query  query='PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>
                    SELECT * WHERE { 
                      VALUES (?name ?entity ?nameLabel) {
                        ( <http://www.researchspace.org/id/person/john> crm:E21_Person  "John" )
                        ( <http://www.researchspace.org/id/person/peter> crm:E21_Person  "Peter" )

                      }
                    }'
              template='{{> mytemplate}}'>    <!--the results of this query are passed to a template-->

<template id='mytemplate'> <!--the template can contain html and variables from the query-->

<!--styles can be used-->	
<style> 		
</style>

<div class=center>    
  <h3>People</h3>

  <!--this command loops through multiple results - we have two sets of results here-->

  {{#each bindings}}
  <!--The query values  are then used in html using the curly bracket format with the property .value -->
  <semantic-link iri="{{name.value}}" class="text-link">
    <div>URI: {{name.value}}
      <span style="padding-left:10px;"></span> 
      <b>is the address for an</b> 
      <span style="padding-left:10px;"></span>
      Entity: {{entity.value}}
      <span style="padding-left:10px;"></span>
      <b>whose name is</b>
      <span style="padding-left:10px;"></span> 
      Name: {{nameLabel.value}}
    </div>
  </semantic-link>
  <p/> 
  <!--The loop is ended-->
  {{/each}}  

</div>
</template>
</semantic-query>
          ]]>
          </mp-code-example>
          
          <p>The select clause is using artificial data using the VALUES keyword which can construct hardcoded tabular information. However, in a real example the query would against the triple data store. This examples provides the principle of retrieving data and then using it in a template. </p>

          <p>IMPORTANT: Many components use this basic principle. They retrieve data and then present that data in different ways. This means that setting up the templates requires a basic understanding of SPARQL. However, basic SPARQL can be learnt quickly.</p>                
          
          <table class="table table-striped table-bordered">
            <tbody>
              <tr>
                <td><mp-code-highlight mode='application/sparql-query' code-text='mydomain:id/person rdf:type crm:E21_Person'></mp-code-highlight></td>
                <td>This URI provides the address of a Person</td>
              </tr>
              <tr>
                <td><mp-code-highlight mode='application/sparql-query' code-text='mydomain:id/person crm:P1_is_identified_by
                  mydomain:id/person/appellation'></mp-code-highlight></td>
                <td>This person has an appellation (name)</td>
              </tr>
              <tr>
                <td><mp-code-highlight mode='application/sparql-query' code-text='mydomain:id/person/appellation crm:P90_has_symbolic_content <person_name>'></mp-code-highlight></td>
                <td>The text of the name for a person</td>
              </tr>
            </tbody>
          </table>

          <p>In a SPARQL query I can retrieve all the names of all the people recorded in this way by saying:</p>
            
          <mp-code-block mode='text/html'>
          <![CDATA[
PREFIX mydomain: <http://www.mydomain.org/>
PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?name WHERE {
?person rdf:type crm:E21_Person .
?person crm:P1_is_identified_by / crm:P90_has_symbolic_content ?name .
}
          ]]>
          </mp-code-block>
          
        </section>

        <hr class="divider">

        <section id="rs-doc_components">
          <h3>Declarative Components</h3>
          <p><strong>The idea behind the system is flexibility!</strong> The main ReactJS components create user components
              which are embedded into templates 
            and which individually retrieve information from the SPARQL Endpoint through a declarative SPARQL 
            statement which is a parameter of the component itself.</p>

            <p>Typically a React component then has the ability to convert the results of a query through a template. 
              For example, one of the simplest ReactJS components is Semantic Query. This component can initiate 
              a SELECT statement, and the results can be accessed in a designated template. The transfer of SELECT variables, 
              for example <code>SELECT ?person ?birthPlace {...</code> become available as handlebars <code>{{person.value}}</code> and 
              <code>{{birthPlace.value}}</code>. 
              Combined with the logic available in handlebars each result can be part of a loop which can be tested by 
              conditions and displayed using  different presentations as appropriate. As such it is very easy to retrieve 
              and present RDF data in a styled web page.
            </p>

            <p>An example Semantic Query: </p>
            <mp-code-block mode='text/html'>
            <![CDATA[
<semantic-query   query='PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>
                      SELECT ?person ?birthPlace {
                        ?person is_former_or_current_member_of crm:P2_has_type 
                        <http://www.researchspace.org/resource/architect> .
                      }'
              template='{{> architectsTemplate}}'>

<template id='architectsTemplate'>
List of architects:
<ul>
{{#each bindings}}
  <li>
    <semantic-link iri='{{person.value}}'></semantic-link>
    <mp-resource-thumbnail iri='{{person.value}}' 
    style="max-width: 400px; max-height: 100px;" />
  </li>
{{/each}}
</ul>
</template>
</semantic-query>
            ]]>
            </mp-code-block>

            <p>In the above example, the SPARQL SELECT asks for a list of people and their birth place, 
              if the person is an architect, where P2_has_type is the CIDOC CRM relation that connects 
              an entity to some specific terminology. </p>

        </section>

        <hr class="divider">

        <section id="rs-doc_addData">
          <h2>Working with data</h2>
          <p>
            ResearchSpace can add existing data in different ways.
          </p>
          <ul>
              <li>Drag and drop an RDF file or LOAD a file via HTTP/FTP into the 
                  ResearchSpace data import facility accessible going in the 
                  <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                                  urlqueryparam-view='admin'
                                  urlqueryparam-resource-iri='[[resolvePrefix "Admin:DataImportExport"]]'
                                  urlqueryparam-custom-label='Data import & Download'
                                  class="text-link-action">
                                  Administration area - Data import & Download
                  </semantic-link>. This utility supports file import, either from a local disk or across a web connection (HTTP or FTP).
              </li>

              <li>Use the 
                <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                                urlqueryparam-view='admin'
                                urlqueryparam-resource-iri='http://www.researchspace.org/resource/system/SparqlEndpoint'
                                urlqueryparam-custom-label='SPARQL'
                                class="text-link-action"> 
                  SPARQL interface
                </semantic-link>.
              </li>
              <li>Author data using the ResearchSpace user orientated authoring tools.</li>
              <li>Use the curl utility (if you have a large amount of data to load).</li>
              <li>Use a specialist third party tool.</li>
          </ul>

          <p>
            To learn more look at the 
            <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                            urlqueryparam-view='help'
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:WorkingWithData"]]'
                            urlqueryparam-custom-label='Working with data'
                            class="text-link-action">
              Working with data guide
            </semantic-link>
            and 
            <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                            urlqueryparam-view='help'
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:GraphStoreAPI"]]'
                            urlqueryparam-custom-label='Graph Store API'
                            class="text-link-action">
              Graph store API guide
            </semantic-link>.  
          </p>

        </section>

        <section id="rs-doc_loadFile">

          <br>
          <h3>Loading a data File through 'Data import & Export'</h3>
          <p>If you use a local file then use the <b>File Upload tab</b>, 
            click on the upload panel and find the file or drag it in from your desktop file manager/explorer. 
            In the advanced option click the "Keep source NamedGraphs" option.</p>

          <p>Otherwise, click the <b>Load by HTTP/FTP/File URL tab</b> option and enter the URL to load the file 
            from the Internet (using the keep source NamedGraphs option again).</p>

          <p>It is best to use a <b>trig</b> file. A trig file is similar to a <b>turtle (ttl)</b>
              file but a graph can be created around the data using the convention:
          </p>

          <mp-code-block mode='text/html'>
          <![CDATA[
<http://www.mygraph.org/graph> {		
RDF
} 
          ]]>
          </mp-code-block>

          <p>This means that if things go wrong the graph can be deleted with the following command:</p>
          <mp-code-block mode='text/html'>
          <![CDATA[
DROP GRAPH  <http://www.mygraph.org/graph>
          ]]></mp-code-block>
          
        </section>

        <section id="rs-doc_uploadExample">

          <h3>Quick Example</h3>

          <ol>
            <li>Go to the
              <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                              urlqueryparam-view='admin'
                              urlqueryparam-resource-iri='[[resolvePrefix "rsp:admin"]]'
                              urlqueryparam-custom-label='Administration'
                              class="text-link-action">
                              Administration page
              </semantic-link>.</li>
            <li>Choose 'Data Import & Export'.</li>
            <li>Download the example RDF file: 
              <a href="/assets/architects.trig" download="architects.trig">
                <i class="fa fa-download" style="padding-right: 5px; text-decoration: none;"></i><span class="text-link-action">architects.trig</span></a>
              </li>
            <li>Drag it into the drag and drop box after selecting keep source NamedGraphs.</li>
            <li>Create a new template page by typing the following in the browser address bar: 
              <pre>
                <code>http://localhost:10214/resource/mytestpage?action=edit</code>
              </pre>
            </li>
            <li>Add the code below, a Semantic Query component:
              <mp-code-block mode='text/html'>
              <![CDATA[
<semantic-query query=' PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
                    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
                    PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>
                    SELECT ?person ?label WHERE {
                      ?person a <http://www.cidoc-crm.org/cidoc-crm/E21_Person> .  	 
                      ?person <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by>/<http://www.w3.org/2000/01/rdf-schema#label>|rdfs:label ?label .
                      }'
            template='{{> template}}'>
            
<template id='template'>
    <p>My List:</p>
    <ul>
      {{#each bindings}} 	 
      <li>
          <semantic-link iri='{{person.value}}'>{{label.value}}</semantic-link>
      </li>
      {{/each}}
    </ul>
</template>
</semantic-query>
              ]]>
              </mp-code-block>

            </li>
            <li>Save the page and see the results.</li>
          </ol>
          
        </section>

        <hr class="divider">

        <section id="rs-doc_configuration">
          <h2>Simple Configuration</h2>
        </section>

        <section id="rs-doc_kp">
          <h3>Knowledge Patterns (a quick introduction)</h3>
          <p>ResearchSpace uses a query language called SPARQL. 
            In some respects this may be seen as similar to SQL in relational databases. 
            However, SPARQL allows queries that reflect the patterns of the data and by 
            using variables retrieve information within those patterns. A SPARQL pattern might say:
          </p>
            <mp-code-block mode='text/html'>
            <![CDATA[
PREFIX vocab: <http://www.myvocabs.org/id/>
PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm>
SELECT ?object WHERE {
?object crm:P2_has_type vocab:vase .
} 
              ]]>
            </mp-code-block>
        
          <p>This query retrieves the URIs of all entities that have a relation to the vocabulary term “vase”.</p>

          <p>Knowledge Patterns are profiles for authoring and retrieving RDF patterns for use in components. 
            They are special in that they work only on the entity that is in context for a template. 
            If the template relates to an E22_Man-Made_Object instance then the pattern only applies to that subject. 
            It uses a special variable $subject. It then has another special variable $value for the actual value of interest.
          </p>

          <mp-code-block mode='text/html'>
          <![CDATA[
PREFIX vocab: <http://www.myvocabs.org/id/>
PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm>
SELECT $subject WHERE {
$subject crm:P2_has_type $value .
} 
            ]]>
          </mp-code-block>

          <p>In this case this would operate on an instance and retrieve the value of its P2_has_type for that instance. 
            Equally this can be used for INSERT and DELETE.</p>

          <p>Knowledge Patterns are defined in the 
            <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                            urlqueryparam-view='admin'
                            urlqueryparam-resource-iri='http://www.researchspace.org/resource/system/fieldDefinitionContainer'
                            urlqueryparam-custom-label='Knowledge Patterns'
                            class="text-link-action">
                            Administration area: Knowledge Pattern catalog
            </semantic-link>
            and can make the complex world of SPARQL more manageable.
          </p>

          <p>See more on Knowledge Patterns in the 
            <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                            urlqueryparam-view='help'
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:SemanticForm"]]'
                            urlqueryparam-custom-label='Semantic Form'
                            class="text-link-action">
              semantic form guide
            </semantic-link>.  
          </p>

          <h3 style="margin-top: 2.5rem;">Anatomy of a Knowledge Pattern</h3>
          <p>If you describe a knowledge pattern’s  RDF you end with something like this:</p>
          <mp-code-block mode='RDF/Turtle'>
          <![CDATA[
Platform:fieldDefinitionContainer 
<http://www.w3.org/ns/ldp#contains> crm:P108_has_produced .
crm:P108_has_produced a <http://www.researchspace.org/resource/system/fields/Field>,
<http://www.w3.org/ns/ldp#Resource>, prov:Entity, owl:ObjectProperty;
<http://www.researchspace.org/resource/system/fields/category> <http://www.researchspace.org/category/generic/summary>,
<http://www.researchspace.org/category/knowledge_map>;
<http://www.researchspace.org/resource/system/fields/domain> crm:E12_Production;
<http://www.researchspace.org/resource/system/fields/selectPattern> _:genid-d2cf5a87daf24dc294ceae1ced829206-t67133;
<http://www.researchspace.org/resource/system/fields/insertPattern> _:genid-d2cf5a87daf24dc294ceae1ced829206-t67132;
<http://www.researchspace.org/resource/system/fields/deletePattern> _:genid-d2cf5a87daf24dc294ceae1ced829206-t67131;
<http://www.researchspace.org/resource/system/fields/range> crm:E24_Physical_Man-Made_Thing;
<http://www.researchspace.org/resource/system/fields/xsdDatatype> xsd:anyURI;
prov:generatedAtTime "2021-09-09T00:28:55.542Z"^^xsd:dateTime;
prov:wasAttributedTo User:admin;
<http://www.researchspace.org/resource/system/fields/maxOccurs> "unbound";
<http://www.researchspace.org/resource/system/fields/minOccurs> "0";

rdfs:comment """Pattern defining a production activity.
"""@en,
"""This property identifies the E24 Physical Man-Made Thing that came into existence as a result of an E12 Production.
The identity of an instance of E24 Physical Man-Made Thing is not defined by its matter, but by its existence as a 
subject of documentation. An E12 Production can result in the creation of multiple instances of E24 Physical Man-Made Thing.""";

rdfs:domain crm:E12_Production;
rdfs:label "hat hergestellt"@de, "παρήγαγε"@el, "has produced"@en, "a produit"@fr,
"produziu"@pt, "произвел"@ru, "有产出物"@zh;
rdfs:range crm:E24_Physical_Man-Made_Thing;
rdfs:subPropertyOf crmsci:O17_generated, crm:P31_has_modified, crm:P92_brought_into_existence .
            ]]>
          </mp-code-block>

          <div>This follows the fields of the user interface for knowledge pattern 
            (with the URL - <a
            href="http://www.cidoc-crm.org/cidoc-crm/P108_has_produced" target="_blank">http://www.cidoc-crm.org/cidoc-crm/P108_has_produced</a> - 
            which isn't a CIDOC CRM entity but just a made up URI for the knowledge pattern) 
            generation but shows the underlying RDF more clearly. As such all these properties can be queried. For example:

            <img src="/assets/images/manual/kp_anatomy.png" class="img-fluid">
          </div>

          <p>You can find the range of the pattern by a simple query. Then you can retrieve any property which you can use in the logic of declarations 
            relating to component generation. In this case you may want to use only patterns that have the range E24_Physical_Man-Made_Thing.
          </p>

        </section>

        <hr class="divider">

        <section id="rs-doc_search">
          <h3>Search</h3>

          <p>The system can search everything or can have different configurations for different entities and groups 
            of entities. It can also use categories assigned to different knowledge patterns.
            SPARQL queries determine what entities are part of a search and allow the configuration of semantic facets.</p>

          <p>The main search template is 
            <a href="/resource/rsp:SearchContent" target="_blank" class="text-link-action">rsp:SearchContent</a>.
          </p>

          <p>
            Click the <b>edit page</b> link at the top right of the page to edit it or directly bring up editing mode going to 
            <a href="/resource/rsp:SearchContent?action=edit" target="_blank" class="text-link-action">
              rsp:SearchContent?action=edit</a>.
          </p>


          [[!-- <div class="alert alert-danger">MISSING CODEBLOCK</div> --]]

          <div>This is a configuration from an existing ResearchSpace site. There are two main sections:
            <ul>
              <li><mp-code-highlight mode='text/html' code-text='<semantic-search config>'></mp-code-highlight>
                  which configures the semantic facets</li>
                
              <li><mp-code-highlight mode='text/html' code-text='<semantic-search-query-keyword>'></mp-code-highlight>
                  which configures the keyword search element.</li>
            </ul>
          </div>

        </section>

        <section id="rs-doc_searchConfig">

          <h3>Semantic Search Config</h3>

          <mp-code-block mode='application/sparql-query'>
          <![CDATA[
SELECT DISTINCT ?field WHERE { 
?field a <http://www.researchspace.org/resource/system/fields/Field> . 
?field <http://www.researchspace.org/resource/system/fields/domain> ?domain . 
?field <http://www.researchspace.org/resource/system/fields/range> ?range . 
?field <http://www.researchspace.org/resource/system/fields/category> 
<http://www.researchspace.org/category/generic/summary> . 
}
          ]]></mp-code-block>

          <p>This query retrieves fields (knowledge patterns). Knowledge patterns define how the system 
            retrieves individual patterns of information from the RDF knowledge base. 
            These patterns are defined through RDF themselves. They have a class type Field.</p>

          <p>The line  
            <mp-code-highlight mode='application/sparql-query' code-text='?field a <http://www.researchspace.org/resource/system/fields/Field>'></mp-code-highlight>
            says that we want to retrieve things that are of type field.</p>

          <p>The line 
            <mp-code-highlight mode='application/sparql-query' code-text='?field <http://www.researchspace.org/resource/system/fields/domain> ?domain'></mp-code-highlight>
            says to also retrieve fields 
            that have a particular class domain. In this case nothing is specifically specified, 
            but <mp-code-highlight mode='application/sparql-query' code-text='?domain'></mp-code-highlight>
            could be replaced with a specific class - like Human-Made_Object.</p>

          <p>The line 
            <mp-code-highlight mode='application/sparql-query' code-text='?field <http://www.researchspace.org/resource/system/fields/range> ?range'></mp-code-highlight>
            allows a range filter.</p>

          <mp-code-highlight mode='application/sparql-query' code-text='<http://www.researchspace.org/resource/system/fields/category> . 
            <http://www.researchspace.org/category/generic/summary> .'></mp-code-highlight>
          <p>Finally, these last lines say that we want fields that have a category (which is set in the knowledge pattern) of summary. Therefore in this 
            case all the patterns that have a category of “summary” are retrieved and used to create the semantic facets.</p>
        </section>

        <br>

        [[!--
        <section id="rs-doc_searchKeyword">

          <h3>Semantic search query keyword</h3>
          <p>The keyword search has two parts: 
            one which caters for the user typing a keyword search, the other is the default 
            when the search system is loaded.</p>

            <mp-code-highlight mode='text/html' code-text="domain='<http://www.cidoc-crm.org/cidoc-crm/E1_CRM_Entity>'"></mp-code-highlight>
            <p>The domain can be restricted to a particular part of the ontology. In this case the root is defined as E1_CRM_Entity and therefore all classes are available.</p>
        
            <p>Entity templates are defined in 
              Administration → Authority and entity configuration.
              The entity definition includes a designation of a particular class called For type. 
              The line 
              <mp-code-highlight mode='text/html' code-text='?a <http://www.researchspace.org/resource/system/authority_manager/for_type> ?type .'></mp-code-highlight>
              retrieves all the class types that have been defined in the system. 
              The assumption here is that if an entity has not been defined then it is not relevant for search.</p>

              <p>For search we don’t want the results populated with all the vocabularies (unless it is a vocabulary search configuration). 
                The following lines filter out concepts and items belonging to skos schemes.
              </p>

              <mp-code-highlight mode='text/html' code-text="FILTER (?type not in (<http://www.w3.org/2004/02/skos/core#Concept>))"></mp-code-highlight>
              <p><mp-code-highlight mode='text/html' code-text="FILTER NOT EXISTS {?subject skos:inScheme   
                <http://www.researchspace.org/resource/system/FieldCategories> }"></mp-code-highlight></p>
      
              <p>The line 
                <mp-code-highlight mode='text/html' code-text="?subject <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by>/<http://www.w3.org/2000/01/rdf-schema#label>|rdfs:label ?label ."></mp-code-highlight>
                retrieves an rdfs:label which is either located on an entity that is predicated by P1_is_identified_by or 
                simply a label on the entity itself. Other optional relations can be configured.
              </p>

              <p>Lastly, the text search service is invoked which converts what the user types into a taken for the keyword search.</p>
              <mp-code-block mode='text/html'>
              <![CDATA[
SERVICE <http://www.bigdata.com/rdf/search#search> {
        ?label bds:search ?__token__ ;
        bds:minRelevance "0.3" ;
        bds:matchAllTerms "true"  .
}         
                ]]>
              </mp-code-block>

              <p>The default-query search is the same logic except it is loaded at the start. It need not be the same as interactive keyword search.</p>
        
              <mp-code-block mode='text/html'>
              <![CDATA[
default-query='SELECT ?subject WHERE {
            ?a <http://www.researchspace.org/resource/system/authority_manager/for_type> ?type .
            ?subject a ?type .
            FILTER (?type not in (<http://www.w3.org/2004/02/skos/core#Concept>))
            FILTER NOT EXISTS {?subject skos:inScheme <http://www.researchspace.org/resource/system/FieldCategories>}
          }'
              ]]>
              </mp-code-block>

                <p>The reference to authority_manager allows a search initiated from an entity template 
                  which only uses the type of that template.</p>

        </section>

        <hr class="divider">
        --]]

        <section id="rs-doc_kmap">
          <h3>Knowledge Map</h3>
          <p>The knowledge map allows free form graph creation particularly useful for qualitative 
            connection and enriching existing information. Knowledge Maps have access to literally 
            100’s of knowledge patterns, some of which are overlapping and can create duplicate relations. 
            For this reason, it can be configured to exclude patterns not wanted or needed.</p>
          <p>
            The main knowledge map template is 
            <a href="/resource/rsp:KnowledgeMapOntodiaConfig?action=edit" target="_blank" class="text-link-action">
              rsp:KnowledgeMapOntodiaConfig</a>.
            The key configuration defines the types of patterns that you want to make available to the knowledge map system. 
            This is partly to reduce relations that you know are not required (but can be easily added later) or to avoid duplicate relations.
          </p>

          <mp-code-block mode='text/html'>
          <![CDATA[
<rs-ontodia-metadata-from-fields
fields-query='PREFIX field: <http://www.researchspace.org/resource/system/fields/>
            SELECT DISTINCT ?field WHERE { 
              ?field a <http://www.researchspace.org/resource/system/fields/Field> . 
              ?field <http://www.researchspace.org/resource/system/fields/category> ?category .
              FILTER (?category in (<http://www.researchspace.org/vocab/category/object>))
            }'>
</rs-ontodia-metadata-from-fields>                     
          ]]>
          </mp-code-block>

          <p>It works the same way as the search system in that a select query defines what knowledge patterns 
            you want to make available to a given knowledge map. This can also be done through categories 
            assigned to knowledge patterns or through any other knowledge map property.  
          </p>

          <p>The <b>image-iris</b> property specifies the relations for images:</p>
          <mp-code-block mode='text/html'>
          <![CDATA[
image-iris='["http://www.researchspace.org/ontology/PX_has_main_representation", 
          "http://www.cidoc-crm.org/cidoc-crm/P138i_has_representation"
        ]'                  
          ]]>
          </mp-code-block>
          
        </section>

        <hr class="divider">
        
        <section id="rs-doc_rsPage">
          [[> Help:PageAnatomy includedTemplate='true']]
        </section>
        
        <hr class="divider">

        <section id="rs-doc_css">
          [[> Help:CssGuide includedTemplate='true']]
        </section>

        <hr class="divider">

        <section id="rs-doc_semantic">
          <h2>Semantic components</h2>
          <semantic-tree query='
          SELECT ?node ?parent ?title  WHERE {                    
          VALUES (?node ?parent ?title) { 
              (<[[resolvePrefix "Help:SemanticLink"]]> UNDEF "Semantic link" )
              (<[[resolvePrefix "Help:SemanticConditional"]]> UNDEF "Semantic conditional" )
              (<[[resolvePrefix "Help:SemanticQuery"]]> UNDEF "Semantic query" )
              (<[[resolvePrefix "Help:SemanticCarousel"]]> UNDEF "Semantic carousel" )
              (<[[resolvePrefix "Help:SemanticTable"]]> UNDEF "Semantic table")
              (<[[resolvePrefix "Help:SemanticGraph"]]> UNDEF "Semantic graph" )
              (<[[resolvePrefix "Help:SemanticTree"]]> UNDEF "Semantic tree" )
              (<[[resolvePrefix "Help:SemanticLazyTree"]]> UNDEF "Semantic lazy tree" )
              (<[[resolvePrefix "Help:SemanticTimeline"]]> UNDEF "Semantic timeline" )
              (<[[resolvePrefix "Help:SemanticMap"]]> UNDEF "Semantic map" )
              (<[[resolvePrefix "Help:SemanticChart"]]> UNDEF "Semantic chart" )
              (<[[resolvePrefix "Help:SemanticForm"]]> UNDEF "Semantic form")
              (<[[resolvePrefix "Help:SemanticSimpleSearch"]]> UNDEF "Semantic simple search" )
              (<[[resolvePrefix "Help:SemanticSearch"]]> UNDEF "Semantic structured search" )
              (<[[resolvePrefix "Help:StructuredSearchExample"]]> <[[resolvePrefix "Help:SemanticSearch"]]> "Example: Structured search" )
              (<[[resolvePrefix "Help:StructuredKeywordSearchExample"]]> <[[resolvePrefix "Help:SemanticSearch"]]> "Example: Keyword search with facets" )
              (<[[resolvePrefix "Help:StructuredConstantSearchExample"]]> <[[resolvePrefix "Help:SemanticSearch"]]> "Example: Constant search with facets" )
              (<[[resolvePrefix "Help:FormBasedSearch"]]> UNDEF "Semantic search form-based" )
              (<[[resolvePrefix "Help:SemanticContext"]]> UNDEF "Semantic context")
              (<[[resolvePrefix "Help:Ontodia"]]> UNDEF "Ontodia diagram")
              (<[[resolvePrefix "Help:ImageGraphAuthoring"]]> UNDEF "Image graph authoring")
            }
          }' tuple-template='{{> node}}'>
          
          <template id='node'>
            <span>
              <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                              urlqueryparam-view='help'
                              urlqueryparam-resource-iri='{{node.value}}'
                              urlqueryparam-custom-label='{{title.value}}'
                              class="text-link-action">
                {{title.value}}
              </semantic-link>
            </span>
          </template>
          </semantic-tree>
        </section>  

        <hr class="divider">

        <section id="rs-doc_utility">
          [[> Help:MPComponents includedTemplate='true']]

          <hr class="divider">

          [[> Help:Dashboard includedTemplate='true']]

          <hr class="divider">

          [[> Help:DocumentationComponents includedTemplate='true']]

          <hr class="divider">

          [[> Help:MultipleSelection includedTemplate='true']]

          <hr class="divider">

          <h3 id="rs-doc_workflowSystem">Workflow system</h3>
          <p>The workflow system allows to create simple workflow solutions around some resources or data publication processes.</p>
          <p>
            The workflow is intended as a publication process that goes through several stages or, so called, 
            steps with tasks for each step assigned to specific users of the system. To learn more look 
            at the 
            <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                            urlqueryparam-view='help' 
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:Workflow"]]' 
                            urlqueryparam-custom-label='Workflow'
                            class="text-link-action">
              workflow guide
            </semantic-link>. 
          </p>
        </section>

        <hr class="divider">
          
        <section id="rs-doc_events">
          <h2>Events</h2>
          <p>
            The event system allows different components of the platform to interact and exchange data with each other.
            To learn more look at 
            the 
            <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                            urlqueryparam-view='help'
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:EventSystem"]]'
                            urlqueryparam-custom-label='Event System'
                            class="text-link-action">
              event guide
            </semantic-link>. 
          </p>
        </section>

        <hr class="divider">

        <section id="rs-doc_settings">
          <h2>Settings</h2>
          [[> Help:BasicSystemConfiguration includedTemplate='true']] 
          <hr class="divider">
          <h3 id="rs-doc_repManager">Repository manager</h3>
          <p>The ResearchSpace platform works with the knowledge graph data stored in RDF repositories. 
            By default, the platform works with one specific repository, but it is able to access data 
            from as many repositories as needed. For example, while the main knowledge graph is stored 
            in the default repository, it may be necessary to retrieve and display linked data from 
            external public data sources or to maintain auxiliary internal information (such as saved user 
            queries from the query catalog) separately from the main domain knowledge.
          </p>

          <p>See more in the 
            <semantic-link  iri="http://www.researchspace.org/resource/ThinkingFrames" 
                            urlqueryparam-view='help'
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:RepositoryManager"]]'
                            urlqueryparam-custom-label='Repository Manager'
                            class="text-link-action">
              repository manager guide
            </semantic-link>.  
          </p>

          <hr class="divider">
          [[> Help:AuthenticationProxy includedTemplate='true']] 
        </section>

        <hr class="divider">
        <section id="rs-doc_logs">
          <h2>Platform logs</h2>
          [[> Help:DevopsTools includedTemplate='true']] 
        </section>
        <hr class="divider">

        <section id="rs-doc_apps">
          [[> Help:Apps includedTemplate='true']] 
            <div>
              <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                              urlqueryparam-view='help' 
                              urlqueryparam-resource-iri='[[resolvePrefix "Help:"AppsMechanism]]' 
                              urlqueryparam-custom-label='Apps Mechanism'
                              class="text-link-action">
                App mechanism
              </semantic-link>
            </div>
            <div>
              <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                              urlqueryparam-view='help' 
                              urlqueryparam-resource-iri='[[resolvePrefix "Help:AppDeployment"]]' 
                              urlqueryparam-custom-label='App Deployment'
                              class="text-link-action">
                App deployment
              </semantic-link>
            </div>
            <div>
              <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                              urlqueryparam-view='help' 
                              urlqueryparam-resource-iri='[[resolvePrefix "Help:Storage"]]' 
                              urlqueryparam-custom-label='Storage'
                              class="text-link-action">
                Storage
              </semantic-link>
            </div>
            <div>
              <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                              urlqueryparam-view='help' 
                              urlqueryparam-resource-iri='[[resolvePrefix "Help:GitStorageGuide"]]' 
                              urlqueryparam-custom-label='Git Storage Guide'
                              class="text-link-action">
                Setup GIT as runtime storage
              </semantic-link>
            </div>
        </section>

        <hr class="divider">

        <section id="rs-doc_federation">
          <h2>Federation</h2>
          <p>The platform incorporates two federation engines tailored towards data integration from multiple sources.</p>
            <div>
              <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                              urlqueryparam-view='help' 
                              urlqueryparam-resource-iri='[[resolvePrefix "Help:OpenStreetMap"]]' 
                              urlqueryparam-custom-label='Open Street Map'
                              class="text-link-action">
                Open Street Map
              </semantic-link>
            </div>
            <div>
              <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                              urlqueryparam-view='help' 
                              urlqueryparam-resource-iri='[[resolvePrefix "Help:RESTSail"]]' 
                              urlqueryparam-custom-label='REST Sail'
                              class="text-link-action">
                REST Sail integration
              </semantic-link>
            </div>
        </section>

        <hr class="divider">

        <section id="rs-doc_services">
          <h2>Services</h2>
          <div>
            <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                            urlqueryparam-view='help' 
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:LDPAssetsManagement"]]' 
                            urlqueryparam-custom-label='LDP Assets Management'
                            class="text-link-action">
              LDP assets management
            </semantic-link>
          </div>
          <div>
            <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                            urlqueryparam-view='help' 
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:Publishing"]]' 
                            urlqueryparam-custom-label='Publishing'
                            class="text-link-action">
              RDF Publishing
            </semantic-link>
          </div>
        </section>

        <hr class="divider">

        <section id="rs-doc_tutorials">
          <h2>Tutorials</h2>
          <div>
            <semantic-link  iri='http://www.researchspace.org/resource/ThinkingFrames' 
                            urlqueryparam-view='help' 
                            urlqueryparam-resource-iri='[[resolvePrefix "Help:ComponentTutorial"]]' 
                            urlqueryparam-custom-label='Component Tutorial'
                            class="text-link-action">
              React component tutorial
            </semantic-link>
          </div>
        </section>


        [[!-- <section id="rs-doc_images">
                <h2>Images and IIIF</h2>
              </section>
              <hr class="divider">
          --]]
      </div>
    </div>
  </div>

</mp-splitpane>
