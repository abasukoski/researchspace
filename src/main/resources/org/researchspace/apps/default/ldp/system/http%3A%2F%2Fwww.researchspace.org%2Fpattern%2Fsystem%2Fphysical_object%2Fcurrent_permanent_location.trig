@prefix ns1: <http://spinrdf.org/sp#> .
@prefix ns2: <http://www.researchspace.org/resource/system/fields/> .
@prefix ns3: <http://www.w3.org/ns/ldp#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://www.researchspace.org/pattern/system/physical_object/current_permanent_location/context> {
    <http://www.researchspace.org/resource/system/fieldDefinitionContainer> ns3:contains <http://www.researchspace.org/pattern/system/physical_object/current_permanent_location> .

    <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab1> a ns1:Query ;
        ns1:text """SELECT DISTINCT ?value ?label WHERE {
   	$subject crm:P54_has_current_permanent_location ?value .
      
    ?value a crm:E53_Place .
    ?value crm:P1_is_identified_by ?appellation .
    ?appellation a crm:E41_Appellation .
    ?appellation crm:P2_has_type <http://www.researchspace.org/resource/system/vocab/resource_type/primary_appellation> . 
    ?appellation crm:P190_has_symbolic_content ?label .
}""" .

    <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab2> a ns1:Query ;
        ns1:text """DELETE {  
     $subject crm:P54_has_current_permanent_location ?value .
     $value crm:P54i_is_current_permanent_location_of $subject .
} WHERE { 
     $subject crm:P54_has_current_permanent_location ?value .
     $value crm:P54i_is_current_permanent_location_of $subject .
      
      ?value a crm:E53_Place .
      ?value crm:P1_is_identified_by ?appellation .
      ?appellation a crm:E41_Appellation .
      ?appellation crm:P2_has_type <http://www.researchspace.org/resource/system/vocab/resource_type/primary_appellation> . 
      ?appellation crm:P190_has_symbolic_content ?label .
}""" .

    <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab3> a ns1:Query ;
        ns1:text """INSERT { 
     $subject crm:P54_has_current_permanent_location ?value .
     $value crm:P54i_is_current_permanent_location_of $subject .
} WHERE {
}""" .

    <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab4> a ns1:Query ;
        ns1:text """SELECT DISTINCT ?value ?label WHERE {
    $value a crm:E53_Place .
    ?value crm:P1_is_identified_by ?appellation .
    ?appellation a crm:E41_Appellation .
    ?appellation crm:P2_has_type <http://www.researchspace.org/resource/system/vocab/resource_type/primary_appellation> . 
    ?appellation crm:P190_has_symbolic_content ?label .
} ORDER BY ASC(LCASE(STR(?label)))""" .

    <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab5> a ns1:Query ;
        ns1:text """SELECT DISTINCT ?value ?label WHERE {
    $value a crm:E53_Place .
    ?value crm:P1_is_identified_by ?appellation .
    ?appellation a crm:E41_Appellation .
    ?appellation crm:P2_has_type <http://www.researchspace.org/resource/system/vocab/resource_type/primary_appellation> . 
    ?appellation crm:P190_has_symbolic_content ?label .
  MINUS { ?value crm:P71i_is_listed_in|skos:inScheme ?systemAuthority . ?systemAuthority crm:P2_has_type Platform:System_Resource . }
  FILTER REGEX(LCASE(STR(?label)), "?token", "i")
} ORDER BY ASC(?label)
  LIMIT 10""" .

    <http://www.researchspace.org/pattern/system/physical_object/current_permanent_location> a ns2:Field,
            ns3:Resource,
            prov:Entity ;
        rdfs:label "Current permanent location" ;
        ns2:autosuggestionPattern <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab5> ;
        ns2:category <http://www.researchspace.org/resource/system/category/human_made_object_search>,
            <http://www.researchspace.org/resource/system/category/physical_object>,
            <http://www.researchspace.org/resource/system/category/physical_object_search>,
            <http://www.researchspace.org/resource/system/category/series_search> ;
        ns2:deletePattern <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab2> ;
        ns2:domain <http://www.cidoc-crm.org/cidoc-crm/E19_Physical_Object>,
            <http://www.cidoc-crm.org/cidoc-crm/E20_Biological_Object>,
            <http://www.cidoc-crm.org/cidoc-crm/E21_Person>,
            <http://www.cidoc-crm.org/cidoc-crm/E22_Human-Made_Object> ;
        ns2:insertPattern <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab3> ;
        ns2:maxOccurs "1" ;
        ns2:minOccurs "0" ;
        ns2:range <http://www.cidoc-crm.org/cidoc-crm/E53_Place> ;
        ns2:selectPattern <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab1> ;
        ns2:valueSetPattern <http://www.researchspace.org/bnode/ndca4aba50a67462fa17e7041091dae8ab4> ;
        ns2:xsdDatatype xsd:anyURI ;
        rdfs:comment "The foreseen permanent location of the  object at the time of validity of this record. It indicates the place currently reserved for an object,  such as the permanent storage location or a permanent exhibit location. The object may be temporarily removed from the permanent location, for example when used in temporary exhibitions or loaned to another institution. The object may never actually be located at its permanent location." ;
        prov:generatedAtTime "2024-05-28T15:40:07.603000+01:00"^^xsd:dateTime ;
        prov:wasAttributedTo <http://www.researchspace.org/resource/user/admin> .
}

