@prefix ns1: <http://spinrdf.org/sp#> .
@prefix ns2: <http://www.w3.org/ns/ldp#> .
@prefix ns3: <http://www.researchspace.org/resource/system/fields/> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://www.researchspace.org/pattern/system/person/signature_image/context> {
    <http://www.researchspace.org/resource/system/fieldDefinitionContainer> ns2:contains <http://www.researchspace.org/pattern/system/person/signature_image> .

    <http://www.researchspace.org/bnode/ned32a885a36f46a385c0a61381f84053b1> a ns1:Query ;
        ns1:text """DELETE { 
    $subject crm:P14i_performed ?creation .

    ?creation crm:P94_has_created ?signature .
    ?signature a crm:E26_Physical_Feature .

	?signature crm:P65_shows_visual_item ?mark .
	?mark a crm:E37_Mark .
	?mark crm:P2_has_type <http://www.researchspace.org/resource/vocab/mark_type/signature> .
  	
    ?signature crm:P138i_has_representation $value .
  	$value crm:P138_represents ?signature . 
} WHERE {
	$subject crm:P14i_performed ?creation .

    ?creation crm:P94_has_created ?signature .
    ?signature a crm:E26_Physical_Feature .

	?signature crm:P65_shows_visual_item ?mark .
	?mark a crm:E37_Mark .
	?mark crm:P2_has_type <http://www.researchspace.org/resource/vocab/mark_type/signature> .
  	
    ?signature crm:P138i_has_representation $value .
    $value a rs:EX_Digital_Image .
  	$value crm:P138_represents ?signature . 
}""" .

    <http://www.researchspace.org/bnode/ned32a885a36f46a385c0a61381f84053b2> a ns1:Query ;
        ns1:text """INSERT { 
    $subject crm:P14i_performed ?creation .

    ?creation crm:P94_has_created ?signature .
    ?signature a crm:E26_Physical_Feature .

	?signature crm:P65_shows_visual_item ?mark .
	?mark a crm:E37_Mark .
	?mark crm:P2_has_type <http://www.researchspace.org/resource/vocab/mark_type/signature> .
  	
    ?signature crm:P138i_has_representation $value .
  	$value crm:P138_represents ?signature .   
} WHERE {
	BIND(URI(CONCAT(str($subject),"/signature_creation/",STRUUID())) as ?creation)
    BIND(URI(CONCAT(str(?creation),"/signature")) as ?signature)
    BIND(URI(CONCAT(str(?signature),"/signature_mark")) as ?mark)
}""" .

    <http://www.researchspace.org/bnode/ned32a885a36f46a385c0a61381f84053b3> a ns1:Query ;
        ns1:text """SELECT DISTINCT ?value WHERE {
	  $subject crm:P14i_performed ?creation .

    ?creation crm:P94_has_created ?signature .
    ?signature a crm:E26_Physical_Feature .

    ?signature crm:P65_shows_visual_item ?mark .
    ?mark a crm:E37_Mark .
    ?mark crm:P2_has_type <http://www.researchspace.org/resource/vocab/mark_type/signature> .
  	
    ?signature crm:P138i_has_representation $value .
    $value a rs:EX_Digital_Image .
  	$value crm:P138_represents ?signature . 
}""" .

    <http://www.researchspace.org/pattern/system/person/signature_image> a ns3:Field,
            ns2:Resource,
            prov:Entity ;
        rdfs:label "Signature image"@en ;
        ns3:category <http://www.researchspace.org/resource/system/category/person> ;
        ns3:deletePattern <http://www.researchspace.org/bnode/ned32a885a36f46a385c0a61381f84053b1> ;
        ns3:domain <http://www.cidoc-crm.org/cidoc-crm/E21_Person> ;
        ns3:insertPattern <http://www.researchspace.org/bnode/ned32a885a36f46a385c0a61381f84053b2> ;
        ns3:maxOccurs "unbound" ;
        ns3:minOccurs "0" ;
        ns3:range <http://www.cidoc-crm.org/cidoc-crm/E36_Visual_Item>,
            <http://www.researchspace.org/ontology/EX_Digital_Image> ;
        ns3:selectPattern <http://www.researchspace.org/bnode/ned32a885a36f46a385c0a61381f84053b3> ;
        ns3:xsdDatatype xsd:anyURI ;
        prov:generatedAtTime "2024-01-16T14:40:25.660000+00:00"^^xsd:dateTime ;
        prov:wasAttributedTo <http://www.researchspace.org/resource/user/admin> .
}

